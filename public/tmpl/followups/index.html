
<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE-edge">
		<title>Resounding followups dashboard</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans">
		<link rel="stylesheet" href="css/bootstrap.css">
		<link rel="stylesheet" href="css/bootstrap-modal.css">
		<link rel="stylesheet" href="css/font-awesome.css">
		<link rel="stylesheet" href="css/followup.css">
	</head>
	<body>
		<h1><i class="icon-beaker"></i> Hello, node on Azure!</h1>

		<div class="col-sm-6">
			<% followups.forEach(function(row) { %>
			<% var overdueClass = row.overdue ? 'overdue' : ''; %>
			<% var iconClass = 'icon-calendar'; %>
			<% switch((row.nextContact.type || '').toLowerCase()) {
				case 'call': iconClass = 'icon-phone'; break;
				case 'meeting': iconClass = 'icon-group'; break;
				case 'email': iconClass = 'icon-envelope'; break;
			} %>
			<div class="appointment <%= overdueClass %>">
				<div class="col-xs-8">
					<h3><%- row.firstName %> <%- row.lastName %></h3>

					<address>
						<strong><%- row.organization %></strong><br />
						<% if(row.address) { %>
							<% if(row.address.street) { %>
								<%- row.address.street %>
								<br />
							<% } %>
							<%- row.address.city %>
							<% if(row.address.city && row.address.province) { print(', '); } %>
							<%- row.address.province %>
							<% if(row.address.city && row.address.province) { %>
								<br />
							<% } %>
						<% } %>
						<% if(row.email) { %>
							<abbr title="Email">E:</abbr>
							<a href="mailto:<%= row.email %>">
								<%= row.email %>
							</a>
							<br />
						<% } %>
						<% if(row.phones) { %>
							<% row.phones.forEach(function(phone) { %>
								<abbr title="<%= phone.type%>"><%= phone.abbreviation %>:</abbr>
								<a href="tel:<%= phone.number %>"><%= phone.number %></a>
								<br />
							<% }) %>						
						<% } %>
					</address>
				</div>
				<div class="col-xs-4" style="text-align: center">
					<div class="icon-stack" style="margin-top: 20px; margin-bottom: 10px;">
						<% if(row.nextContact.confirmed) { %>
							<i class="icon-calendar-empty icon-stack-base"></i>
							<i class="icon-border <%= iconClass %>"></i>
						<% } else { %>
							<i class="icon-stack-base <%= iconClass %>"></i>
						<% } %>
					</div>
					<% if(row.nextContact.confirmed) { %>
					<h4><%= row.nextContact.timeString %></h4>
					<% } else { %>
					<h4><%- row.nextContact.reason %></h4>
					<% } %>
					<% if(row.overdue) { %>
					<h4><%= row.nextContact.dateString %></h4>
					<% } %>
					<!-- <div class="map" id="burlington-financial-map"></div>-->
				</div>
			</div>
			<% }); %>
			<!--
			<div class="appointment">
				<div class="col-xs-8">
					<h3>Mark Stewart</h3>

					<address>
						<strong>RBC Burlington</strong><br />
						9858 Fairview St., Suite 600<br />
						Burlington, ON L7D 5S9<br />
						<abbr title="Email">E:</abbr> <a href="mailto:mark.stewart@rbc.com">mark.stewart@rbc.com</a>
					</address>
				</div>
				<div class="col-xs-4" style="text-align: center">
					<div class="icon-stack" style="margin-top: 20px; margin-bottom: 10px;">
						<i class="icon-calendar-empty icon-stack-base"></i>
						<i class="icon-phone icon-border"></i>
					</div>
					<h3><a href="tel:9056397676">(905) 639-8787</a></h3>
				</div>
			</div>-->
		</div>

		<script src="js/jquery-1.10.2.js"></script>
		<script src="js/bootstrap.js"></script>
		<script src="js/bootstrap-modal.js"></script>
		<script src="js/bootstrap-modalmanager.js"></script>
		<script src="//maps.googleapis.com/maps/api/js?key=AIzaSyCmVsKj8xNC1dLEWI0thHQlHB3rr1iHHIY&sensor=true"></script>
		<script type="text/javascript">
		function initialize() {
			var mapOptions = {
				center: new google.maps.LatLng(43.3561686, -79.7742005),
					zoom: 15,
					mapTypeId: google.maps.MapTypeId.ROADMAP,
					streetViewControl: false,
					mapTypeControl: false
			};
			var map = new google.maps.Map(document.getElementById('burlington-financial-map'), mapOptions);
		}
		
		google.maps.event.addDomListener(window, 'load', initialize);

		</script>
	</body>
</html>